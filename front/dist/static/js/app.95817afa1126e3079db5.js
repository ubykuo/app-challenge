webpackJsonp([1],[,,,,,,function(t,e,s){function o(t){s(66)}var n=s(0)(s(23),s(86),o,"data-v-73d92544",null);t.exports=n.exports},,function(t,e,s){"use strict";e.a={BASE_URL:"localhost"===window.location.hostname?"http://192.168.0.22:8080":"",CLIENT_ID:"AIzaSyB_bzFNBzczyua7-c1DyNefI81waHu7j7k"}},,,,function(t,e,s){function o(t){s(59)}var n=s(0)(s(27),s(79),o,"data-v-030c12b7",null);t.exports=n.exports},function(t,e,s){function o(t){s(62)}var n=s(0)(s(31),s(82),o,"data-v-2a8d90c6",null);t.exports=n.exports},function(t,e,s){"use strict";var o=s(7),n=s(90),i=s(72),a=s.n(i),r=s(75),c=s.n(r);o.a.use(n.a),e.a=new n.a({mode:"history",routes:[{path:"/",name:"Hello",component:a.a},{path:"/room/:username",name:"Room",component:c.a}]})},function(t,e,s){function o(t){s(68)}var n=s(0)(s(21),s(88),o,null,null);t.exports=n.exports},,,,function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(7),n=s(15),i=s.n(n),a=s(14),r=s(17),c=s(18),u=s.n(c),l=s(16),d=s.n(l);o.a.use(r.a),o.a.use(d.a),o.a.use(u.a,"ws://app-challenge.herokuapp.com"),o.a.config.productionTip=!1,new o.a({el:"#app",router:a.a,template:"<App/>",components:{App:i.a},localStorage:{id:{type:String,default:!1}}})},function(t,e,s){"use strict";e.a=function(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=0;s<10;s++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(6),n=s.n(o),i=s(20);e.default={name:"app",components:{Navigation:n.a},created:function(){"false"===this.$localStorage.get("id")&&this.$localStorage.set("id",s.i(i.a)()),console.info(this.$localStorage.get("id"))}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(6),n=s.n(o),i=s(76),a=s.n(i),r=s(12),c=s.n(r);e.default={name:"hello",data:function(){return{rooms:[]}},components:{Navigation:n.a,RoomList:a.a,RoomButton:c.a},methods:{myRoom:function(){var t=this.$localStorage.get("id");this.$router.push("/room/"+t)}},created:function(){this.$socket.emit("init")},socket:{events:{rooms:function(t){this.rooms=t}}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(13),n=s.n(o);e.default={components:{SongList:n.a},name:"Navigation",data:function(){return{showNav:!1,query:""}},props:{onSearch:{type:Function,required:!1},songs:{type:Array,required:!1,default:function(){return[]}},withSearch:{type:Boolean,required:!1,default:function(){return!1}}},methods:{toggle:function(){this.showNav=!this.showNav}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(74),n=s.n(o);e.default={name:"Player",props:{playing:{type:Boolean,required:!0},progress:{type:Number,required:!0},onToggle:{type:Function,required:!0}},components:{ProgressBar:n.a},methods:{forward:function(){this.$socket.emit("next",this.$route.params.username)}},computed:{getPlayingIcon:function(){return this.playing?"fa-pause":"fa-play"}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ProgressBar",computed:{style:function(){return{width:this.progress+"%"}}},props:{progress:{type:Number,required:!0}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(32),n=s.n(o),i=s(13),a=s.n(i),r=s(6),c=s.n(r),u=s(94),l=s.n(u),d=s(73),p=s.n(d),f=s(8);e.default={name:"Room",components:{SongList:a.a,Navigation:c.a,Player:p.a},data:function(){return{results:[],currentSong:{},songs:[],roomId:this.$route.params.username,isPlaying:!1,player:null,progress:0}},created:function(){this.$socket.emit("access-room",this.roomId)},destroyed:function(){this.isHost&&this.$socket.emit("destroy",this.roomId)},computed:{isHost:function(){return this.roomId===this.$localStorage.get("id")},hasCurrent:function(){return n()(this.currentSong).length>0}},methods:{onKeyUp:function(t){var e=this;t.length>3?this.$http.get("https://www.googleapis.com/youtube/v3/search",{params:{q:"musica "+t,part:"snippet, id",type:"video",key:f.a.CLIENT_ID},before:function(t){this.previousRequest&&this.previousRequest.abort(),this.previousRequest=t}}).then(function(t){e.results=t.data.items}):0===t.length&&(this.results=[])},onToggle:function(){this.isPlaying=!this.isPlaying,this.isPlaying?this.hasCurrent?this.player.playVideo():this.$socket.emit("next",this.roomId):this.player.pauseVideo()},loadPlayer:function(t){var e=this;l.a.load(function(s){function o(t){var e=this;switch(t.data){case s.PlayerState.PLAYING:this.isPlaying=!0;var o=this.player.getDuration();n=setInterval(function(){e.progress=e.player.getCurrentTime()/o*100},1e3);break;case s.PlayerState.ENDED:this.$socket.emit("next",this.roomId),this.isPlaying=!1,clearTimeout(n);break;case s.PlayerState.PAUSED:this.isPlaying=!1,clearTimeout(n)}}var n=void 0;e.player=new s.Player("player",{height:"100%",width:"100%",videoId:t,playerVars:{autoplay:1},events:{onStateChange:o.bind(e)}})})}},socket:{events:{room:function(t){this.songs=t.songs.sort(function(t,e){return t.votes.length<e.votes.length?1:t.votes.length>e.votes.length?-1:0})},current:function(t){this.currentSong=t,this.player?this.player.loadVideoById(t.id.videoId):this.player=this.loadPlayer(t.id.videoId)},destroyed:function(){this.isHost||this.$router.push("/")}}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"RoomButton",props:{onClick:{type:Function,required:!1}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(77),n=s.n(o),i=s(12),a=s.n(i);e.default={name:"RoomList",components:{RoomPreview:n.a,RoomButton:a.a},props:{rooms:{type:Array,required:!0},myRoom:{type:Function,required:!1}},created:function(){},methods:{empty:function(){return 0===this.rooms.length}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(71),n=s.n(o);e.default={name:"RoomPreview",props:{data:{type:Object,required:!0}},beforeCreate:function(){this.backgroundColor=n()({luminosity:"light"})},data:function(){return{styleObject:{backgroundColor:this.backgroundColor}}},methods:{onClick:function(){this.$router.push("/room/"+this.data.room_id)}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(8);e.default={name:"Song",props:{detail:{type:Object},isHost:{type:Boolean},isPlaylist:{type:Boolean},onSelect:{type:Function,required:!1}},computed:{imgSrc:function(){return this.detail.snippet.thumbnails[o.a.CLIENT_ID].default.url},hasVoted:function(){var t=this.$localStorage.get("id");return void 0!==this.detail.votes.find(function(e){return e===t})},voteCount:function(){return this.isPlaylist?this.detail.votes.length:0}},methods:{onRemove:function(t){this.$socket.emit("remove",this.$route.params.username,t)},onVote:function(t){this.$socket.emit("vote",this.$localStorage.get("id"),this.$route.params.username,t)},addToPlaylist:function(t){this.$socket.emit("add-song",this.$localStorage.get("id"),this.$route.params.username,t),this.onSelect()}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(78),n=s.n(o);e.default={name:"SongList",components:{Song:n.a},props:{songs:{type:Array,required:!0},isHost:{type:Boolean,required:!0},isPlaylist:{type:Boolean,required:!1,default:!0},onSelect:{type:Function,required:!1,default:function(){}}},created:function(){}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,function(t,e,s){function o(t){s(61)}var n=s(0)(s(22),s(81),o,"data-v-22085f10",null);t.exports=n.exports},function(t,e,s){function o(t){s(64)}var n=s(0)(s(24),s(84),o,"data-v-678c0eaa",null);t.exports=n.exports},function(t,e,s){function o(t){s(65)}var n=s(0)(s(25),s(85),o,"data-v-6d49e1cc",null);t.exports=n.exports},function(t,e,s){function o(t){s(69)}var n=s(0)(s(26),s(89),o,"data-v-d02ad3b6",null);t.exports=n.exports},function(t,e,s){function o(t){s(63)}var n=s(0)(s(28),s(83),o,"data-v-50eb9d63",null);t.exports=n.exports},function(t,e,s){function o(t){s(67)}var n=s(0)(s(29),s(87),o,"data-v-7cfe8e13",null);t.exports=n.exports},function(t,e,s){function o(t){s(60)}var n=s(0)(s(30),s(80),o,"data-v-047b4542",null);t.exports=n.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("button",{on:{click:t.onClick}},[t._t("default")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"song"},[s("div",{staticClass:"detail"},[s("h3",[t._v(t._s(t.detail.snippet.title))]),t._v(" "),s("h4",[t._v(t._s(t.detail.snippet.channelTitle))])]),t._v(" "),t.isPlaylist?s("div",{staticClass:"actions"},[t.isHost?s("div",{staticClass:"action",on:{click:function(e){t.onRemove(t.detail)}}},[s("i",{staticClass:"fa fa-2x fa-trash"})]):t.isHost||t.hasVoted?!t.isHost&&t.hasVoted?s("div",{staticClass:"action"},[s("span",[t._v(t._s(t.voteCount))]),t._v(" "),s("i",{staticClass:"fa fa-2x fa-check"})]):t._e():s("div",{staticClass:"action",on:{click:function(e){t.onVote(t.detail)}}},[s("span",[t._v(t._s(t.voteCount))]),t._v(" "),s("i",{staticClass:"fa fa-2x fa-thumbs-up"})])]):s("div",{staticClass:"actions"},[s("div",{staticClass:"action",on:{click:function(e){t.addToPlaylist(t.detail)}}},[s("i",{staticClass:"fa fa-2x fa-plus"})])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("navigation"),t._v(" "),s("div",{staticClass:"header-container"},[s("div",{staticClass:"header"},[s("h1",[t._v("All the rooms")]),t._v(" "),s("room-button",{attrs:{"on-click":t.myRoom}},[t._v("My Room")])],1)]),t._v(" "),s("room-list",{attrs:{"my-room":t.myRoom,rooms:t.rooms}})],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"song-list"},[t.songs.length>0?s("ul",t._l(t.songs,function(e){return s("li",[s("song",{attrs:{detail:e,"is-host":t.isHost,"is-playlist":t.isPlaylist,"on-select":t.onSelect}})],1)})):s("div",{staticClass:"no-songs"},[t._v("\n    There are no songs\n  ")])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"rooms",class:{grid:!t.empty()}},[t._l(t.rooms,function(e){return s("room-preview",{directives:[{name:"show",rawName:"v-show",value:!t.empty(),expression:"!empty()"}],attrs:{data:e}})}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.empty(),expression:"empty()"}],staticClass:"no-rooms"},[s("p",[t._v("There are no rooms")]),t._v(" "),s("room-button",{attrs:{"on-click":t.myRoom}},[t._v("Go To My Room")])],1)],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"player-container"},[s("progress-bar",{attrs:{progress:t.progress}}),t._v(" "),s("div",{staticClass:"player"},[s("span",{on:{click:t.onToggle}},[s("i",{staticClass:"fa fa-2x",class:t.getPlayingIcon})]),t._v(" "),s("span",{on:{click:t.forward}},[s("i",{staticClass:"fa fa-2x fa-forward"})])])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"progress",style:t.style})])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",[s("router-link",{staticClass:"main-title",attrs:{to:"/"}},[t._v("Music Room")]),t._v(" "),s("div",{staticClass:"search toggle",on:{click:t.toggle}},[s("i",{staticClass:"fa fa-search fa-2x"})]),t._v(" "),s("div",{staticClass:"overlay",class:{visible:t.showNav}},[s("div",{staticClass:"header"},[t.withSearch?s("div",{staticClass:"search-box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],attrs:{placeholder:"Search for a song...",autofocus:""},domProps:{value:t.query},on:{keyup:function(e){t.onSearch(t.query)},input:function(e){e.target.composing||(t.query=e.target.value)}}})]):t._e(),t._v(" "),s("div",{staticClass:" toggle",on:{click:t.toggle}},[s("i",{staticClass:"fa fa-2x fa-times"})])]),t._v(" "),s("div",{staticClass:"results"},[s("h2",[t._v("Search results")]),t._v(" "),s("song-list",{attrs:{songs:t.songs,"is-host":!1,"is-playlist":!1,"on-select":t.toggle}})],1)])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"room-preview",on:{click:t.onClick}},[s("div",{staticClass:"cover",style:{backgroundColor:t.backgroundColor}},[s("h2",[t._v(t._s(t.data.room_id))])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("main",[s("transition",[s("router-view")],1)],1)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"room"},[s("navigation",{attrs:{"on-search":t.onKeyUp,songs:t.results,"with-search":!0}}),t._v(" "),s("div",{staticClass:"content"},[s("h2",{staticClass:"title"},[t._v("Playing at your Room")]),t._v(" "),t.hasCurrent?s("section",{staticClass:"info-container"},[s("div",{staticClass:"details"},[s("img",{staticClass:"current-album",attrs:{src:t.currentSong.snippet.thumbnails.medium.url,alt:"Album cover"}}),t._v(" "),s("div",{staticClass:"info"},[s("h2",[t._v(t._s(t.currentSong.snippet.title))]),t._v(" "),s("h3",[t._v(t._s(t.currentSong.snippet.channelTitle))]),t._v(" "),s("p",[t._v("Votes "+t._s(t.currentSong.votes.length))])])]),t._v(" "),t.isHost?s("div",[t._m(0)]):t._e()]):s("section",{staticClass:"no-current"},[s("h3",[t._v("No song playing currently")])]),t._v(" "),s("section",{staticClass:"songs"},[s("h3",[t._v("Coming up next")]),t._v(" "),s("song-list",{attrs:{songs:t.songs,"is-host":t.isHost}})],1)]),t._v(" "),t.isHost?s("player",{attrs:{playing:t.isPlaying,progress:t.progress,"on-toggle":t.onToggle}}):t._e()],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"player-container"}},[s("div",{attrs:{id:"player"}})])}]}},,,,,,function(t,e){}],[19]);
//# sourceMappingURL=app.95817afa1126e3079db5.js.map